<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–î–ª—è –ù–∞—Å—Ç—é—à–∏ ‚ù§Ô∏è</title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    text-align: center;
}

.container {
    background: white;
    padding: 50px 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    width: 90%;
    max-width: 700px;
    min-height: 500px;
    position: relative;
    text-align: center;
    box-sizing: border-box;
}

h1 { font-size: 36px; color: #ff4d6d; margin-bottom: 20px; }
p { font-size: 22px; margin-bottom: 30px; }

button {
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    font-size: 20px;
    cursor: pointer;
    transition: 0.3s;
    position: absolute;
}

#yesBtn { background-color: #ff4d6d; color: white; left: 20%; bottom: 20px; }
#yesBtn:hover { background-color: #e63956; }
#noBtn { background-color: #ccc; bottom: 20px; right: 20%; width: 140px; height: 60px; }

.hidden { display: none; }

#loveMessage { font-size: 26px; margin-top: 20px; color: #ff4d6d; }

.gallery {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    position: relative;
    height: 200px;
}

.gallery img {
    width: 150px;
    margin: 10px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    opacity: 0;
    position: absolute;
    transition: all 0.5s ease;
}

#collageContainer {
    position: relative;
    width: 100%;
    height: 300px;
    margin-top: 30px;
    overflow: hidden;
}

#collageContainer img {
    width: 100%;
    max-height: 300px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    transition: all 0.5s ease;
    object-fit: cover;
}

.hearts { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 1;}
.heart { position: absolute; font-size: 24px; animation: float 4s linear infinite;}
@keyframes float {0% { transform: translateY(100vh) scale(1); opacity: 1; } 100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }}

@keyframes shake {0% { transform: translate(0, 0) rotate(0deg);} 20% { transform: translate(-5px, 0) rotate(-10deg);} 40% { transform: translate(5px, 0) rotate(10deg);} 60% { transform: translate(-5px, 0) rotate(-10deg);} 80% { transform: translate(5px, 0) rotate(10deg);} 100% { transform: translate(0, 0) rotate(0deg);}}

.fakeEmoji {
    position: absolute;
    font-size: 40px;
    animation: jumpRotate 1s infinite ease-in-out;
    pointer-events: none;
}

@keyframes jumpRotate {
    0% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-20px) rotate(-15deg); }
    50% { transform: translateY(0) rotate(15deg); }
    75% { transform: translateY(-15px) rotate(-10deg); }
    100% { transform: translateY(0) rotate(0deg); }
}
</style>
</head>
<body>

<div class="container" id="main">
    <div id="initialBlock">
        <h1>üòò–ù–∞—Å—Ç—é—à–∞üíù</h1>
        <p>–¢—ã –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</p>
        <button id="yesBtn">–î–∞ ü§ç</button>
        <button id="noBtn">–ù–µ—Ç ü•∏</button>
    </div>

    <div id="loveBlock" class="hidden">
        <div id="loveMessage">–Ø —Ç–µ–±—è –ª—é–±–ª—é, –ú–∏–ª–∞—è ü§ç<br>–¢—ã —Å–∞–º–æ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å–æ –º–Ω–æ–π üíï</div>
        <div class="gallery" id="gallery">
            <img src="photo1.jpg">
            <img src="photo2.jpg">
        </div>
        <div id="collageContainer"></div>
    </div>
</div>

<div class="hearts" id="hearts"></div>

<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const initialBlock = document.getElementById("initialBlock");
const loveBlock = document.getElementById("loveBlock");
const gallery = document.getElementById("gallery");
const collageContainer = document.getElementById("collageContainer");
const mainContainer = document.getElementById("main");

let noBtnJumps = 0, maxJumps = 4;
const noBtnDefault = {left: "auto", right: "20%", bottom: "20px"};

// –¢—Ä—è—Å—É—â–∏–µ—Å—è —Å–º–∞–π–ª–∏–∫–∏ –¥–ª—è —à—É—Ç–∫–∏
const firstJokeEmojis = ["üò¢","üòø","üò≤","üòµ","üòê","üòë","ü´®","üíî"];
const secondJokeEmojis = ["ü´µ","ü§£","üòÇ","üòπ"];

// –ö–Ω–æ–ø–∫–∞ ¬´–ù–µ—Ç¬ª –ø—Ä—ã–≥–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 4 —Ä–∞–∑–∞
noBtn.addEventListener("mouseover", ()=>{
    if(noBtnJumps < maxJumps){
        const container = document.getElementById("main");
        const maxX = container.clientWidth - noBtn.offsetWidth - 20;
        const maxY = container.clientHeight - noBtn.offsetHeight - 20;
        noBtn.style.left = Math.random()*maxX + "px";
        noBtn.style.top = Math.random()*maxY + "px";
        const colors = ["#ccc","#f28b82","#fbbc04","#34a853","#4285f4"];
        noBtn.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
        noBtn.style.animation = "shake 0.5s";
        setTimeout(()=>{noBtn.style.animation="";},500);
        noBtnJumps++;
    }
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä—è—Å—É—â–∏—Ö—Å—è —Å–º–∞–π–ª–∏–∫–æ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
function showEmojis(emojisArray){
    const created = [];
    emojisArray.forEach(e=>{
        for(let i=0;i<10;i++){
            const span = document.createElement("div");
            span.className="fakeEmoji";
            span.innerText=e;
            span.style.left = Math.random()*80 + "%";
            span.style.top = Math.random()*80 + "%";
            mainContainer.appendChild(span);
            created.push(span);
        }
    });
    return created;
}

// –£–±–∏—Ä–∞–µ–º —Å–º–∞–π–ª–∏–∫–∏
function removeEmojis(spans){
    spans.forEach(s=>s.remove());
}

// –ö–Ω–æ–ø–∫–∞ ¬´–ù–µ—Ç¬ª ‚Äî —à—É—Ç–∫–∞
noBtn.addEventListener("click", ()=>{
    initialBlock.classList.add("hidden");

    // –ü–µ—Ä–≤—ã–π –±–ª–æ–∫ —à—É—Ç–∫–∏
    const firstBlock = document.createElement("div");
    firstBlock.style.fontSize = "32px";
    firstBlock.style.color = "#ff4d6d";
    firstBlock.innerText = "–¢—ã —Å–µ—Ä—å—ë–∑–Ω–æ??";
    mainContainer.appendChild(firstBlock);

    const emojis1 = showEmojis(firstJokeEmojis);

    setTimeout(()=>{
        firstBlock.remove();
        removeEmojis(emojis1);

        // –í—Ç–æ—Ä–æ–π –±–ª–æ–∫ —à—É—Ç–∫–∏
        const secondBlock = document.createElement("div");
        secondBlock.style.fontSize = "32px";
        secondBlock.style.color = "#ff4d6d";
        secondBlock.innerText = "–ê—Ö–∞—Ö—Ö–∞—Ö–∞—Ö–∞ –ù–∞ —à–æ —Ç—ã –Ω–∞–¥–µ—è–ª–∞—Å—å?? –£ —Ç–µ–±—è –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞!";
        mainContainer.appendChild(secondBlock);

        const emojis2 = showEmojis(secondJokeEmojis);

        setTimeout(()=>{
            secondBlock.remove();
            removeEmojis(emojis2);

            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –±–ª–æ–∫
            initialBlock.classList.remove("hidden");
            noBtn.style.left = noBtnDefault.left;
            noBtn.style.right = noBtnDefault.right;
            noBtn.style.bottom = noBtnDefault.bottom;
            noBtnJumps = 0;

        },5000);

    },5000);
});

// –ö–Ω–æ–ø–∫–∞ ¬´–î–∞¬ª
yesBtn.addEventListener("click", ()=>{
    initialBlock.classList.add("hidden");
    loveBlock.classList.remove("hidden");

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º 2 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤—Ç–æ—Ä–æ–≥–æ –±–ª–æ–∫–∞
    const imgs = gallery.querySelectorAll("img");
    imgs.forEach((img,i)=>{
        setTimeout(()=>{
            img.style.opacity = 1;
            img.style.top = (i*20) + "px";
            img.style.left = (i*160 + 20) + "px";
        }, i*500);
    });

    // –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–∫–∞–∑ –Ω–æ–≤—ã—Ö 4 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    setTimeout(()=>{
        const newPhotos = ["new1.jpg","new2.jpg","new3.jpg","new4.jpg"];
        let index = 0;

        function showNextPhoto(){
            if(index >= newPhotos.length) {
                // –ü–æ—Å–ª–µ –≤—Å–µ—Ö —Ñ–æ—Ç–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∏—Ö –≤–Ω–∏–∑—É
                newPhotos.forEach((src,i)=>{
                    const img = document.createElement("img");
                    img.src = src;
                    img.style.opacity = 1;
                    img.style.position = "relative";
                    img.style.top = "0px";
                    img.style.left = (i*140)+"px";
                    collageContainer.appendChild(img);
                });
                return;
            }

            const img = document.createElement("img");
            img.src = newPhotos[index];
            collageContainer.appendChild(img);
            img.style.opacity = 1;

            setTimeout(()=>{
                img.style.opacity = 0;
                index++;
                setTimeout(showNextPhoto, 500);
            }, 2500);
        }

        showNextPhoto();

    },5000);
});
</script>
</body>
</html>
