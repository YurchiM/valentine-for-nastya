<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–î–ª—è –ù–∞—Å—Ç—é—à–∏ ‚ù§Ô∏è</title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    text-align: center;
}

.container {
    background: white;
    padding: 50px 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    width: 90%;
    max-width: 700px;
    min-height: 450px;
    position: relative;
    text-align: center;
    box-sizing: border-box;
}

h1 { font-size: 36px; color: #ff4d6d; margin-bottom: 20px; }
p { font-size: 22px; margin-bottom: 30px; }

button {
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    font-size: 20px;
    cursor: pointer;
    transition: 0.3s;
    position: absolute;
}

#yesBtn { background-color: #ff4d6d; color: white; left: 20%; bottom: 20px; }
#yesBtn:hover { background-color: #e63956; }
#noBtn { background-color: #ccc; bottom: 20px; right: 20%; width: 140px; height: 60px; }

.hidden { display: none; }
#loveMessage { font-size: 26px; margin-top: 20px; color: #ff4d6d; }
.gallery { margin-top: 20px; display: flex; justify-content: center; flex-wrap: wrap;}
.gallery img { width: 150px; margin: 10px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);}
.fadeImg { max-width:90vw; max-height:90vh; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.3); opacity:0; transition: opacity 1s ease-in-out; }
.hearts { position: fixed; top: 0; left: 0; pointer-events: none; z-index: 1;}
.heart { position: absolute; font-size: 24px; animation: float 4s linear infinite;}
@keyframes float {0% { transform: translateY(100vh) scale(1); opacity: 1; } 100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }}

@keyframes shake {0% { transform: translate(0, 0) rotate(0deg);} 20% { transform: translate(-5px, 0) rotate(-10deg);} 40% { transform: translate(5px, 0) rotate(10deg);} 60% { transform: translate(-5px, 0) rotate(-10deg);} 80% { transform: translate(5px, 0) rotate(10deg);} 100% { transform: translate(0, 0) rotate(0deg);}}

.fakeBlock {
    position: absolute;
    top:0; left:0; width:100%; height:100%;
    display: flex; justify-content: center; align-items: center;
    flex-direction: column; font-size: 48px;
    z-index: 100; text-align: center; color: #721c24;
    overflow: hidden;
}

@keyframes jumpRotate {
    0% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-20px) rotate(-15deg); }
    50% { transform: translateY(0) rotate(15deg); }
    75% { transform: translateY(-15px) rotate(-10deg); }
    100% { transform: translateY(0) rotate(0deg); }
}

.fakeEmoji {
    position: absolute;
    font-size: 40px;
    animation: jumpRotate 1s infinite ease-in-out;
    pointer-events: none;
}
</style>
</head>
<body>

<div class="container" id="main">
    <div id="initialBlock">
        <h1>üòò–ù–∞—Å—Ç—é—à–∞üíù</h1>
        <p>–¢—ã –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π?</p>
        <button id="yesBtn">–î–∞ ü§ç</button>
        <button id="noBtn">–ù–µ—Ç ü•∏</button>
    </div>

    <div id="loveBlock" class="hidden">
        <div id="loveMessage">–Ø —Ç–µ–±—è –ª—é–±–ª—é, –ú–∏–ª–∞—è ü§ç<br>–¢—ã —Å–∞–º–æ–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å–æ –º–Ω–æ–π üíï</div>
        <div class="gallery" id="gallery">
            <img src="photo1.jpg">
            <img src="photo2.jpg">
        </div>
    </div>

    <!-- –ù–æ–≤—ã–π –±–ª–æ–∫ –¥–ª—è –ø–æ–∫–∞–∑–∞ –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π -->
    <div id="photoShowBlock" class="hidden" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:101;"></div>

    <!-- –ì–∞–ª–µ—Ä–µ—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø–æ–¥ loveBlock -->
    <div class="gallery" id="newGallery" style="display:none; margin-top:20px; justify-content:center; flex-wrap:wrap;"></div>
</div>

<div class="hearts" id="hearts"></div>
<audio id="loveSong" loop><source src="music.mp3" type="audio/mpeg"></audio>

<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const initialBlock = document.getElementById("initialBlock");
const loveBlock = document.getElementById("loveBlock");
const hearts = document.getElementById("hearts");
const loveSong = document.getElementById("loveSong");
const emojis = ["‚ù§Ô∏è","üíù","üòò"];

const photoShowBlock = document.getElementById("photoShowBlock");
const newGallery = document.getElementById("newGallery");
const newPhotos = ["new1.jpg","new2.jpg","new3.jpg"];

const noBtnDefault = {left: "auto", right: "20%", bottom: "20px"};
let noBtnJumps = 0, maxJumps = 4;

// –ö–Ω–æ–ø–∫–∞ "–ù–µ—Ç" –ø—Ä—ã–≥–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 4 —Ä–∞–∑–∞
noBtn.addEventListener("mouseover", ()=>{
    if(noBtnJumps < maxJumps){
        const container = document.getElementById("main");
        const maxX = container.clientWidth - noBtn.offsetWidth - 20;
        const maxY = container.clientHeight - noBtn.offsetHeight - 20;
        noBtn.style.left = Math.random()*maxX + "px";
        noBtn.style.top = Math.random()*maxY + "px";
        const colors = ["#ccc","#f28b82","#fbbc04","#34a853","#4285f4"];
        noBtn.style.backgroundColor = colors[Math.floor(Math.random()*colors.length)];
        noBtn.style.animation = "shake 0.5s";
        setTimeout(()=>{noBtn.style.animation="";},500);
        noBtnJumps++;
    }
});

// –ö–Ω–æ–ø–∫–∞ "–î–∞"
yesBtn.addEventListener("click", ()=>{
    initialBlock.classList.add("hidden");
    loveBlock.classList.remove("hidden");
    startHearts();
    loveSong.play().catch(()=>console.log("–ú—É–∑—ã–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–æ–º"));

    // —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∫–∞–∑ –±–æ–ª—å—à–∏—Ö —Ñ–æ—Ç–æ
    setTimeout(()=>{ showPhotosSequence(); },5000);
});

function showPhotosSequence(){
    photoShowBlock.classList.remove("hidden");
    let index = 0;

    function showNextPhoto(){
        photoShowBlock.innerHTML = `<img src="${newPhotos[index]}" class="fadeImg">`;
        const img = photoShowBlock.querySelector("img");
        // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
        setTimeout(()=>{ img.style.opacity = 1; },50);

        let displayTime = (index === newPhotos.length - 1) ? 3000 : 2000; // –ø–æ—Å–ª–µ–¥–Ω—è—è —Ñ–æ—Ç–æ 3 —Å–µ–∫

        setTimeout(()=>{
            img.style.opacity = 0; // –ø–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
            setTimeout(()=>{
                index++;
                if(index < newPhotos.length){
                    showNextPhoto();
                } else {
                    photoShowBlock.classList.add("hidden");
                    // –¥–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–æ—Ç–æ –≤ –ø–æ–¥–≥–∞–ª–µ—Ä–µ—é –ø–æ–¥ loveBlock
                    newGallery.innerHTML = newPhotos.map(src => `<img src="${src}">`).join("");
                    newGallery.style.display = "flex";
                }
            }, 1000); // –≤—Ä–µ–º—è –Ω–∞ fade-out
        }, displayTime);
    }

    showNextPhoto();
}

// –ö–Ω–æ–ø–∫–∞ "–ù–µ—Ç" ‚Äî —à—É—Ç–∫–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–º–∞–π–ª–∏–∫–æ–≤ –≤–æ–∫—Ä—É–≥ —Ç–µ–∫—Å—Ç–∞
noBtn.addEventListener("click", ()=>{
    initialBlock.classList.add("hidden");
    
    const fake1 = document.createElement("div");
    fake1.classList.add("fakeBlock");
    fake1.style.background="#f8d7da";
    fake1.innerHTML = "–¢—ã —Å–µ—Ä—å–µ–∑–Ω–æ??";
    document.body.appendChild(fake1);
    startManyEmojis(["üò¢","üòø","üò≤","üòµ","üòê","üòë","ü´®","üíî"], fake1, 50);

    setTimeout(()=>{
        fake1.remove();
        const fake2 = document.createElement("div");
        fake2.classList.add("fakeBlock");
        fake2.style.background="#fff3cd";
        fake2.innerHTML = "–∞—Ö–∞—Ö—Ö–∞—Ö–∞—Ö–∞<br>–ù–∞ —à–æ —Ç—ã –Ω–∞–¥–µ—è–ª–∞—Å—å??<br>–£ —Ç–µ–±—è –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞!";
        document.body.appendChild(fake2);
        startManyEmojis(["ü´µ","ü§£","üòÇ","üòπ"], fake2, 50);

        setTimeout(()=>{
            fake2.remove();
            initialBlock.classList.remove("hidden");
            noBtn.style.left = noBtnDefault.left;
            noBtn.style.right = noBtnDefault.right;
            noBtn.style.bottom = noBtnDefault.bottom;
            noBtnJumps = 0;
        },5000);
    },5000);
});

// –õ–µ—Ç–∞—é—â–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏
function startHearts(){
    setInterval(()=>{
        const heart=document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML=emojis[Math.floor(Math.random()*emojis.length)];
        heart.style.left=Math.random()*window.innerWidth+"px";
        heart.style.fontSize=(20+Math.random()*30)+"px";
        hearts.appendChild(heart);
        setTimeout(()=>heart.remove(),4000);
    },100);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–º–∞–π–ª–∏–∫–æ–≤ –Ω–∞ —à—É—Ç–∫–µ
function startManyEmojis(arr,parent,count){
    for(let i=0;i<count;i++){
        const e = arr[Math.floor(Math.random()*arr.length)];
        const emoji = document.createElement("div");
        emoji.classList.add("fakeEmoji");
        emoji.innerHTML = e;
        let x = Math.random()*(parent.clientWidth-50);
        let y = Math.random()*(parent.clientHeight-50);
        if(y > parent.clientHeight*0.35 && y < parent.clientHeight*0.65){
            y += parent.clientHeight*0.35;
            if(y>parent.clientHeight-50) y=parent.clientHeight-50;
        }
        emoji.style.left = x + "px";
        emoji.style.top = y + "px";
        emoji.style.fontSize = (20 + Math.random()*30)+"px";
        emoji.style.animationDuration = (0.8 + Math.random()*0.7)+"s";
        parent.appendChild(emoji);
    }
}
</script>
</body>
</html>
